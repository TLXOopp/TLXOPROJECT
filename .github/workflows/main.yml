name: Update Game Data

# ì–¸ì œ ì¼í• ì§€ ì •í•©ë‹ˆë‹¤ (ë§¤ì¼ 1ì‹œê°„ë§ˆë‹¤ & ë‚´ê°€ ì½”ë“œë¥¼ ìˆ˜ì •í•´ì„œ ì˜¬ë¦´ ë•Œ)
on:
  schedule:
    - cron: '0 * * * *' # ë§¤ ì‹œê°„ 0ë¶„ë§ˆë‹¤ ì‹¤í–‰
  push:
    branches:
      - main

permissions:
  contents: write

jobs:
  update-data:
    runs-on: ubuntu-latest
    steps:
      - name: ì €ì¥ì†Œ ì²´í¬ì•„ì›ƒ (ì½”ë“œ ê°€ì ¸ì˜¤ê¸°)
        uses: actions/checkout@v3

      - name: Node.js ì„¤ì¹˜
        uses: actions/setup-node@v3
        with:
          node-version: '18'

      - name: ë°ì´í„° ì—…ë°ì´íŠ¸ ì‹¤í–‰ (updater.js ì‹¤í–‰)
        run: node updater.js

      - name: ë³€ê²½ ì‚¬í•­ ì €ì¥ (games.json ì»¤ë°‹)
        run: |
          git config --global user.name "GitHub Action Bot"
          git config --global user.email "actions@github.com"
          git add games.json
          git diff --quiet && git diff --staged --quiet || (git commit -m "ğŸ® Update game data" && git push)